from collections import deque

graph = {1:[2, 3], 2:[4], 3:[4], 4:[]}
indegree = {1:0, 2:1, 3:1, 4:2}

q = deque([node for node in graph if indegree[node] == 0])
order = []

while q:
    node = q.popleft()
    order.append(node)
    for nxt in graph[node]:
        indegree[nxt] -= 1
        if indegree[nxt] == 0:
            q.append(nxt)

print(order)
